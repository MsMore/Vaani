{"version":3,"file":"expo-apple-authentication.js","sourceRoot":"","sources":["../../../src/plugins/unversioned/expo-apple-authentication.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAIA,kDAAsD;AACtD,gDAA0D;AAC1D,sDAAqD;AAErD,MAAM,WAAW,GAAG,2BAA2B,CAAC;AAEhD,MAAM,0BAA0B,GAAG,sCAAwB,CACzD,yBAAyB,EACzB,4BAA4B,CAC7B,CAAC;AAEF,SAAS,yBAAyB,CAChC,MAAkB,EAClB,EAA0E;;QAA1E,EAAE,iCAAiC,EAAE,CAAC,OAAoC,EAAlC,mEAAoB;IAE5D,UAAI,MAAM,CAAC,GAAG,0CAAE,eAAe,EAAE;QAC/B,uCACK,iBAAiB,KACpB,iCAAiC,EAAE,CAAC,SAAS,CAAC,IAC9C;KACH;IAED,OAAO,iBAAiB,CAAC;AAC3B,CAAC;AAEY,QAAA,uBAAuB,GAAiB,MAAM,CAAC,EAAE;IAC5D,OAAO,iCAAgB,CAAC,MAAM,EAAE;QAC9B,eAAe,EAAE,IAAI;QACrB,MAAM,EAAE,WAAW;QACnB,6DAA6D;QAC7D,QAAQ,EAAE,kCAAkC;KAC7C,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,MAAM,kCAAkC,GAAiB,kCAAmB,CAAC,MAAM,CAAC,EAAE;IACpF,MAAM,GAAG,0BAA0B,CAAC,MAAM,CAAC,CAAC;IAC5C,OAAO,MAAM,CAAC;AAChB,CAAC,EAAE,WAAW,CAAC,CAAC;AAEhB,kBAAe,+BAAuB,CAAC","sourcesContent":["import { ExpoConfig } from '@expo/config-types';\nimport { JSONObject } from '@expo/json-file';\n\nimport { ConfigPlugin } from '../../Plugin.types';\nimport { createRunOncePlugin } from '../core-plugins';\nimport { createEntitlementsPlugin } from '../ios-plugins';\nimport { withStaticPlugin } from '../static-plugins';\n\nconst packageName = 'expo-apple-authentication';\n\nconst withAppleSignInEntitlement = createEntitlementsPlugin(\n  setAppleSignInEntitlement,\n  'withAppleSignInEntitlement'\n);\n\nfunction setAppleSignInEntitlement(\n  config: ExpoConfig,\n  { 'com.apple.developer.applesignin': _, ...entitlementsPlist }: JSONObject\n): JSONObject {\n  if (config.ios?.usesAppleSignIn) {\n    return {\n      ...entitlementsPlist,\n      'com.apple.developer.applesignin': ['Default'],\n    };\n  }\n\n  return entitlementsPlist;\n}\n\nexport const withAppleAuthentication: ConfigPlugin = config => {\n  return withStaticPlugin(config, {\n    _isLegacyPlugin: true,\n    plugin: packageName,\n    // If the static plugin isn't found, use the unversioned one.\n    fallback: withUnversionedAppleAuthentication,\n  });\n};\n\nconst withUnversionedAppleAuthentication: ConfigPlugin = createRunOncePlugin(config => {\n  config = withAppleSignInEntitlement(config);\n  return config;\n}, packageName);\n\nexport default withAppleAuthentication;\n"]}