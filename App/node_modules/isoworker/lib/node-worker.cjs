"use strict";
// Mediocre shim
var worker_threads_1 = require("worker_threads");
var workerAdd = "var __wk=require('worker_threads');__wk.parentPort.on('message',function(m){typeof onmessage!='undefined'&&onmessage({data:m})}),postMessage=function(m,t){__wk.parentPort.postMessage(m,t)},close=process.exit;self=global;";
var wk = function (c, msg, transfer, cb) {
    var w = new worker_threads_1.Worker(workerAdd + c, { eval: true })
        .on('message', function (msg) { return cb(null, msg); })
        .on('error', function (err) { return cb(err, null); });
    w.postMessage(msg, transfer);
    w.terminate = function () {
        return worker_threads_1.Worker.prototype.terminate.call(w);
    };
    return w;
};
wk.t = [ArrayBuffer, worker_threads_1.MessagePort];
exports["default"] = wk;
